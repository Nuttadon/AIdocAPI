openapi: 3.0.3
info:
  title: Swagger AIDOCS
  description: |-
    A detailed API specification for fetching reports including AI predictions, dentist diagnoses, and overall statistics.
  version: 1.0.0
servers:
  - url: http://127.0.0.1:5000
tags:
  - name: report
    description: Get users report
paths:
  /report:
    get:
      tags:
        - report
      summary: Get a comprehensive report
      parameters:
        - name: role
          in: header
          required: true
          description: Role of the requester (e.g., "dentist", "osm", "patient").
          schema:
            type: string
            example: "admin"
        - name: province
          in: query
          required: false
          description: Province for which the report is requested (in Thai).
          schema:
            type: string
            example: "เชียงใหม่"
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              example:
                status: "success"
                data:
                  patient_and_osm:
                    osm:
                      accuracy: "100.00"
                      ai_predict:
                        normal: 0
                        opmd: 3
                        oscc: 1
                      dentist_diagnose:
                        normal: 0
                        not_diagnosed: 0
                        opmd: 3
                        oscc: 1
                        others: 0
                        poor_image: 0
                      total_pic: 4
                    patient:
                      accuracy: "50.00"
                      ai_predict:
                        normal: 1
                        opmd: 0
                        oscc: 1
                      dentist_diagnose:
                        normal: 0
                        not_diagnosed: 1
                        opmd: 0
                        oscc: 1
                        others: 0
                        poor_image: 0
                      total_pic: 2
                    total:
                      accuracy: "75.00"
                      ai_predict:
                        normal: 1
                        opmd: 3
                        oscc: 2
                      dentist_diagnose:
                        normal: 0
                        not_diagnosed: 1
                        opmd: 3
                        oscc: 2
                        others: 0
                        poor_image: 0
                  province: "เชียงใหม่"
                  specialist:
                    Computer Technical Officer:
                      ai_predict:
                        normal: 4
                        opmd: 4
                        oscc: 1
                      dentist_diagnose:
                        agree: 0
                        disagree: 0
                      total_pic: 9
                    Oral Pathologist:
                      ai_predict:
                        normal: 1
                        opmd: 4
                        oscc: 2
                      dentist_diagnose:
                        agree: 3
                        disagree: 1
                      total_pic: 7
                    total:
                      ai_predict:
                        normal: 5
                        opmd: 8
                        oscc: 3
                      dentist_diagnose:
                        agree: 3
                        disagree: 1
                      total_pic: 16
                  total_pic:
                    ai_predict:
                      normal: 6
                      opmd: 11
                      oscc: 5
                    total_pic: 22
        '400':
          description: Invalid request parameters
          content:
            application/json:
              example:
                status: "error"
                message: "Invalid request parameters."
        '404':
          description: Not Found
          content:
            application/json:
              example:
                status: "error"
                message: "Resource not found."
        '302':
          description: Found (Redirect)
          headers:
            Location:
              description: URL to redirect the client
              schema:
                type: string
              example: "http://example.com"
        '500':
          description: Internal Server Error
          content:
            application/json:
              example:
                status: "error"
                message: "Internal server error occurred."
